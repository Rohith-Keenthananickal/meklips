"use strict";(self.webpackChunkmeklips=self.webpackChunkmeklips||[]).push([[140],{8140:(F,p,i)=>{i.r(p),i.d(p,{LoginModule:()=>A});var g=i(6814),l=i(3403);class h{}var t=i(9468),c=i(9947),_=i(9862);let u=(()=>{class o{constructor(e,n){this.http=e,this.router=n}login(e){return this.http.post(`${c.N.url}/users/login`,e)}sentOTP(e){return this.http.post(`${c.N.url}api/users/forgot-password`,e)}validateOTP(e){return this.http.post(`${c.N.url}api/users/validate-otp`,e)}updatePassword(e){return this.http.post(`${c.N.url}api/users/reset-password`,e)}static#t=this.\u0275fac=function(n){return new(n||o)(t.LFG(_.eN),t.LFG(l.F0))};static#e=this.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var w=i(5932),f=i(2425),a=i(95);function v(o,d){1&o&&(t.TgZ(0,"div",19),t._UZ(1,"div",20),t.qZA())}function y(o,d){1&o&&(t.TgZ(0,"div",9),t._UZ(1,"div",10),t.qZA())}function x(o,d){if(1&o){const e=t.EpF();t.TgZ(0,"form",11)(1,"div",12)(2,"h2",13),t._uU(3,"Forgot password"),t.qZA(),t.TgZ(4,"p",14),t._uU(5,"Enter your email address and an OTP will be sent to your Email"),t.qZA(),t.TgZ(6,"div",15)(7,"label",16),t._uU(8,"Email address"),t.qZA(),t.TgZ(9,"input",17),t.NdJ("ngModelChange",function(r){t.CHM(e);const s=t.oxw();return t.KtG(s.emailId=r)}),t.qZA()(),t.TgZ(10,"div",18)(11,"button",19),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.forgotPassword())}),t.O4$(),t.TgZ(12,"svg",20),t._UZ(13,"path",21)(14,"path",22)(15,"path",23),t.qZA(),t._uU(16," Send me new password "),t.qZA()()()()}if(2&o){const e=t.oxw();t.xp6(9),t.Q6J("ngModel",e.emailId),t.xp6(2),t.Q6J("disabled",!e.emailId)}}function b(o,d){if(1&o){const e=t.EpF();t.TgZ(0,"form",11)(1,"div",12)(2,"h2",13),t._uU(3,"Enter OTP"),t.qZA(),t.TgZ(4,"p",14),t._uU(5,"Enter the OTP sent to your email address"),t.qZA(),t.TgZ(6,"div",15)(7,"label",24),t._uU(8,"OTP"),t.qZA(),t.TgZ(9,"input",25),t.NdJ("ngModelChange",function(r){t.CHM(e);const s=t.oxw();return t.KtG(s.otp=r)}),t.qZA()(),t.TgZ(10,"div",18)(11,"button",19),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.verifyOtp())}),t.O4$(),t.TgZ(12,"svg",20),t._UZ(13,"path",21)(14,"path",22)(15,"path",23),t.qZA(),t._uU(16," Verify OTP "),t.qZA()()()()}if(2&o){const e=t.oxw();t.xp6(9),t.Q6J("ngModel",e.otp),t.xp6(2),t.Q6J("disabled",!e.otp)}}function P(o,d){if(1&o){const e=t.EpF();t.TgZ(0,"form",11)(1,"div",12)(2,"h2",13),t._uU(3,"Enter New Password"),t.qZA(),t.TgZ(4,"div",15)(5,"label",24),t._uU(6,"New Password"),t.qZA(),t.TgZ(7,"input",26),t.NdJ("ngModelChange",function(r){t.CHM(e);const s=t.oxw();return t.KtG(s.newPassword=r)}),t.qZA()(),t.TgZ(8,"div",15)(9,"label",24),t._uU(10,"Confirm Password"),t.qZA(),t.TgZ(11,"input",27),t.NdJ("ngModelChange",function(r){t.CHM(e);const s=t.oxw();return t.KtG(s.confirmPassword=r)}),t.qZA()(),t.TgZ(12,"div",18)(13,"button",19),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.updatePassword())}),t.O4$(),t.TgZ(14,"svg",20),t._UZ(15,"path",21)(16,"path",22)(17,"path",23),t.qZA(),t._uU(18," Update Password "),t.qZA()()()()}if(2&o){const e=t.oxw();t.xp6(7),t.Q6J("ngModel",e.newPassword),t.xp6(4),t.Q6J("ngModel",e.confirmPassword),t.xp6(2),t.Q6J("disabled",!e.newPassword||!e.confirmPassword)}}const C=[{path:"",component:(()=>{class o{constructor(e,n,r,s){this.router=e,this.loginService=n,this.authService=r,this.toastr=s,this.user=new h,this.loading=!1}goToForgotPassword(){this.router.navigate(["login/forgot-password"])}login(){this.loading=!0,localStorage.setItem("meklips.email",this.user.email),this.authService.login(this.user).subscribe(e=>{console.log(e);let n=e?.data?.user?.id;localStorage.setItem("meklips.userId",n),this.loading=!1,this.router.navigate(["login/welcome"])},e=>{this.loading=!1,console.error("Login error:",e),this.toastr.error("Incorrect Email or Password","Error",{positionClass:"toast-top-right"})})}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(l.F0),t.Y36(u),t.Y36(w.e),t.Y36(f._W))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-login"]],decls:25,vars:3,consts:[["class","loading-overlay",4,"ngIf"],[1,"outer-layer"],[1,"card","d-flex","justify-content-center","align-items-center","border-yellow","border-4","px-5",2,"height","99vh"],[1,"inner-layer","d-flex","justify-content-center","align-items-center","flex-column"],[1,"d-flex","flex-column","justify-content-center","align-items-center"],[1,"mb-4"],["src","./assets/me-logo.png","alt","","width","200px"],[1,"text-blue","mt-3","text-center","fs-1"],[1,"text-center","fs-3","mt-1"],[1,"mb-3","mt-3"],["type","email","name","example-text-input","placeholder","Email Id","spellcheck","false","data-ms-editor","true",1,"form-control",3,"ngModel","ngModelChange"],[1,"mb-3"],[1,"form-label"],[1,"form-label-description","forgot"],[1,"cursor-pointer",3,"click"],["type","password",1,"form-control",3,"ngModel","ngModelChange"],[1,"btn","dark-blue-bg","text-white","w-100",3,"click"],[1,"mt-4"],["src","./assets/mK-logo.png","alt","logo","width","200px"],[1,"loading-overlay"],[1,"loading"]],template:function(n,r){1&n&&(t.YNc(0,v,2,0,"div",0),t.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),t._UZ(6,"img",6),t.qZA(),t.TgZ(7,"div")(8,"div",7),t._uU(9," Log in with Email "),t.qZA(),t.TgZ(10,"div",8),t._uU(11," Login with email address and passord "),t.qZA(),t.TgZ(12,"div",9)(13,"input",10),t.NdJ("ngModelChange",function(m){return r.user.email=m}),t.qZA()(),t.TgZ(14,"div",11)(15,"label",12),t._uU(16,"Password "),t.TgZ(17,"span",13)(18,"a",14),t.NdJ("click",function(){return r.goToForgotPassword()}),t._uU(19," Forgot password"),t.qZA()()(),t.TgZ(20,"input",15),t.NdJ("ngModelChange",function(m){return r.user.password=m}),t.qZA()(),t.TgZ(21,"button",16),t.NdJ("click",function(){return r.login()}),t._uU(22,"Login"),t.qZA()(),t.TgZ(23,"div",17),t._UZ(24,"img",18),t.qZA()()()()()),2&n&&(t.Q6J("ngIf",r.loading),t.xp6(13),t.Q6J("ngModel",r.user.email),t.xp6(7),t.Q6J("ngModel",r.user.password))},dependencies:[g.O5,a.Fj,a.JJ,a.On],styles:[".outer-layer[_ngcontent-%COMP%]{background-color:#fff;width:100%;margin:0;min-height:100vh;display:flex;justify-content:center;align-items:center}.border-yellow[_ngcontent-%COMP%]{border-color:#f1c40f!important}"]})}return o})()},{path:"welcome",component:(()=>{class o{constructor(e){this.router=e}ngOnInit(){this.email=localStorage.getItem("meklips.email")}goToProfile(){this.router.navigate(["profile"])}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(l.F0))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-login-welcome"]],decls:14,vars:0,consts:[[1,"outer-layer","bg-white"],[1,"card","d-flex","justify-content-center","align-items-center","border-yellow","border-4","px-5",2,"height","99vh"],[1,"inner-layer","d-flex","justify-content-center","align-items-center","flex-column"],[1,"d-flex","flex-column","justify-content-center","align-items-center"],[1,"mb-4"],["src","./assets/me-logo.png","alt","","width","200px"],[1,"bold-blue","mt-3","text-center","fs-2"],[1,"bold-blue","mt-1","text-center","fs-2"],[1,"d-flex","justify-content-center","mt-5","w-100"],[1,"btn","dark-blue-bg","text-white","border-0","w-100",3,"click"]],template:function(n,r){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),t._UZ(5,"img",5),t.qZA(),t.TgZ(6,"div")(7,"div",6),t._uU(8," Success! "),t.qZA(),t.TgZ(9,"div",7),t._uU(10," You set up Your Meklips "),t.qZA()(),t.TgZ(11,"div",8)(12,"button",9),t.NdJ("click",function(){return r.goToProfile()}),t._uU(13,"View Your Profile"),t.qZA()()()()()())},styles:[".outer-layer[_ngcontent-%COMP%]{background-color:#e6e7e8;width:100%;margin:0;min-height:100vh;display:flex;justify-content:center;align-items:center}.border-yellow[_ngcontent-%COMP%]{border-color:#f1c40f!important}.btn[_ngcontent-%COMP%]:hover{background-color:#002f72!important;border-color:#002f72!important}"]})}return o})()},{path:"forgot-password",component:(()=>{class o{constructor(e,n,r,s){this.router=e,this.loginService=n,this.toastr=r,this.activeRoute=s,this.formType="EMAIL",this.loading=!1}ngOnInit(){this.activeRoute.queryParams.subscribe(e=>{e.formType&&(this.formType=e.formType)})}forgotPassword(){this.loading=!0,this.loginService.sentOTP({email:this.emailId}).subscribe({next:e=>{this.toastr.success("OTP sent successfully"),this.formType="OTP",this.loading=!1,this.setNavigatioExtras(this.formType)},error:e=>{console.log(e),this.loading=!1,this.toastr.error(e.error.error)}})}verifyOtp(){this.newPassword!==this.confirmPassword?this.toastr.error("Passwords do not match"):this.loginService.validateOTP({email:this.emailId,otp:this.otp}).subscribe({next:e=>{this.toastr.success("OTP verified successfully"),this.formType="NEW_PASSWORD",this.setNavigatioExtras(this.formType)},error:e=>{console.log(e),this.toastr.error(e.error.error)}})}goToLogin(){this.router.navigate(["/login"])}updatePassword(){this.loginService.updatePassword({email:this.emailId,new_password:this.newPassword,otp:this.otp}).subscribe({next:e=>{this.toastr.success("Password updated successfully"),this.goToLogin()},error:e=>{console.log(e),this.toastr.error(e.error.error)}})}setNavigatioExtras(e){this.router.navigate(["login/forgot-password"],{queryParams:{formType:e}})}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(l.F0),t.Y36(u),t.Y36(f._W),t.Y36(l.gz))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-forgot-password"]],decls:14,vars:4,consts:[["class","loading-overlay",4,"ngIf"],[1,"d-flex","justify-content-center","align-items-center",2,"height","100vh"],[1,"container","container-tight","py-4"],[1,"text-center","mb-4"],[1,"navbar-brand","navbar-brand-autodark"],["src","./assets/Meklips-logo-final.png","height","36","alt",""],["class","card card-md","action","./","method","get","autocomplete","off","novalidate","",4,"ngIf"],[1,"text-center","text-secondary","mt-3"],[1,"text-blue","cursor-pointer",3,"click"],[1,"loading-overlay"],[1,"loading"],["action","./","method","get","autocomplete","off","novalidate","",1,"card","card-md"],[1,"card-body"],[1,"card-title","text-center","mb-3"],[1,"text-secondary","mb-4","text-center"],[1,"mb-3"],[1,"form-label"],["type","email","name","email","placeholder","Enter email",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-footer"],[1,"btn","btn-primary","w-100",3,"disabled","click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"icon"],["stroke","none","d","M0 0h24v24H0z","fill","none"],["d","M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z"],["d","M3 7l9 6l9 -6"],[1,"form-label","required"],["type","text","name","otp","placeholder","Enter OTP",1,"form-control",3,"ngModel","ngModelChange"],["type","password","name","newPassword","placeholder","Enter new password",1,"form-control",3,"ngModel","ngModelChange"],["type","password","name","confirmPassword","placeholder","Confirm password",1,"form-control",3,"ngModel","ngModelChange"]],template:function(n,r){1&n&&(t.YNc(0,y,2,0,"div",0),t.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"a",4),t._UZ(5,"img",5),t.qZA()(),t.YNc(6,x,17,2,"form",6),t.YNc(7,b,17,2,"form",6),t.YNc(8,P,19,3,"form",6),t.TgZ(9,"div",7),t._uU(10," Forget it, "),t.TgZ(11,"a",8),t.NdJ("click",function(){return r.goToLogin()}),t._uU(12,"send me back"),t.qZA(),t._uU(13," to the sign in screen. "),t.qZA()()()),2&n&&(t.Q6J("ngIf",r.loading),t.xp6(6),t.Q6J("ngIf","EMAIL"==r.formType),t.xp6(1),t.Q6J("ngIf","OTP"==r.formType),t.xp6(1),t.Q6J("ngIf","NEW_PASSWORD"==r.formType))},dependencies:[g.O5,a._Y,a.Fj,a.JJ,a.JL,a.On,a.F]})}return o})()}];let M=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[l.Bz.forChild(C),l.Bz]})}return o})(),A=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[g.ez,M,a.u5]})}return o})()}}]);